<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title th:text="${obj.goodsName +config.title }"></title>
    <link th:href="@{/style/system/front/default/css/public.css}" type="text/css" rel="stylesheet"/>
    <link th:href="@{'/style/shop/'+${goodsStore.template}+'/css/default.css'}" type="text/css" rel="stylesheet"/>
    <link th:href="@{/style/common/css/overlay.css}" type="text/css" rel="stylesheet"/>
    <link th:href="@{/style/common/css/jquery.jqzoom.css}" type="text/css" rel="stylesheet"/>
    <script th:src="@{/js/jquery-1.6.2.js}"></script>
    <script th:src="@{/js/jquery-ui-1.8.21.js}"></script>
    <script th:src="@{/js/jquery.shop.common.js}"></script>
    <script th:src="@{/js/jquery.validate.min.js}"></script>
    <script th:src="@{/js/jquery.jqzoom-core.js}"></script>
    <script th:src="@{/js/jquery.lazyload.js}"></script>
    <script th:src="@{/js/top.js}"></script>
    <script th:src="@{/js/store_left.js}"></script>
    <script th:src="@{/js/store_head.js}"></script>
</head>
<body>
<div class="top_page">
    <div class="pageright" id="site-nav">
        <ul class="quick-menu">
            <li class="mytaobao menu-item menupx">
                <div class="menu"><a class="menu-hd" th:href="@{/buyer/index.htm}" rel="nofollow" th:text="#{messages.my.order}"><b></b></a>
                    <div class="menu-bd">
                        <div class="menu-bd-panel">
                            <div>
                                <a th:href="@{/buyer/order.htm(order_status=order_submit)}" rel="nofollow" th:text="#{messages.waiting.pay}"></a>
                                <a th:href="@{/buyer/order.htm(order_status=order_shipping)}" rel="nofollow" th:text="#{messages.waiting.delivery}"></a>
                                <a th:href="@{/buyer/order.htm(order_status=order_receive)}" rel="nofollow" th:text="#{messages.waiting.evalution}"> </a>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            <li class="mytaobao menu-item menupx">
                <div class="menu">
                    <a class="menu-hd" th:href="@{/seller/index.htm}" rel="nofollow" th:text="#{messages.merchants.support}"><b></b></a>
                    <div class="menu-bd">
                        <div class="menu-bd-panel">
                            <div>
                                <a th:href="@{http://emode.xdjplus.com:8080/seller/index.htm}" rel="nofollow" th:text="#{messages.merchants.center}"></a>
                                <a th:href="@{http://emode.xdjplus.com:8080/seller/order.htm}" rel="nofollow" th:text="#{messages.merchants.order}"></a>
                                <a th:href="@{http://emode.xdjplus.com:8080/seller/goods.htm}" rel="nofollow" th:text="#{messages.merchants.goods}"></a>
                                <span th:switch="${user != null}">
									<a th:case="true" th:href="@{/store.htm(id=${user.storeId})}"
                                       rel="nofollow" th:text="#{messages.my.shop}"></a>
                                    <a th:case="false" th:href="@{/seller/store_create_first.htm}"
                                       rel="nofollow" th:text="#{messages.merchants.in}"></a>
								</span>

                            </div>
                        </div>
                    </div>
                </div>
            </li>

            <li class="search menu-item menupx">
                <div class="menu" id="cart_menu">
                     <span class="menu-hd" id="cart_goods_top_menu">
                    <s></s>
                    <a th:href="@{/goods_cart1.htm}" rel="nofollow" th:text="#{messages.goods.cart}"></a><b></b>
                  </span>
                </div>
            </li>
            <li class="menupx">
                <a th:href="@{/buyer/message.htm}">
                    <span th:text="#{messages.plateform.message}"></span>
                    <span th:if="${msgs != null }" style="color:#FF3300;" th:text="${msgs.size()}"></span></a>
            </li>
            <li class="mytaobao menu-item menupx">
                <div class="menu">
                    <a class="menu-hd" th:href="@{/buyer/favorite_goods.htm}" rel="nofollow" th:text="#{messages.my.collect}"><b></b></a>
                    <div class="menu-bd">
                        <div class="menu-bd-panel">
                            <div>
                                <a th:href="@{/buyer/favorite_goods.htm}" rel="nofollow" th:text="#{messages.collect.goods}"></a>
                                <a th:href="@{/buyer/favorite_store.htm}" rel="nofollow" th:text="#{messages.collect.shop}"></a>
                            </div>
                        </div>
                    </div>
                </div>
            </li>

            <li th:if="${suer != null && user.userRole == 'ADMIN' }" class="menupx">
                <a th:href="@{/admin/index.htm}" target="_blank" th:text="#{messages.manage.nohup}"></a>
            </li>
            <li class="menupx" th:if="${navs != null}">
                <a th:href="@{/articlelist.htm(param=help)}" th:text="#{messages.help.center}"></a>
            </li>

            <li class="menupx" style="background:none;" th:if="${navs == null}">
                <a th:href="@{/articlelist.htm(param=help)}" th:text="#{messages.help.center}"></a>
            </li>

            <li class="mytaobao menu-item menupx" style="background:none;" th:if="${navs != null }">
                <div class="menu">
                    <a class="menu-hd" href="/buyer/index.htm" rel="nofollow" th:text="#{messages.more.link}"><b></b></a>
                    <div class="menu-bd" style="height:auto;">
                        <div class="menu-bd-panel">
                            <div th:each="nav : ${navs}">
                                <a th:href="@{ '/' + ${ nav.url }}" rel="nofollow" th:text="${nav.title}"></a>
                            </div>
                        </div>
                    </div>
                </div>
            </li>

        </ul>
    </div>
    <div class="pageleft">
        <span th:switch="${user != null}">
          <span th:case="true">
             <span th:text="${user.username}"></span>
			  <span th:text="#{messages.welcome.word}"></span>
			  <span th:text=" ${config.websitename}"></span>
             <a th:href="@{/shopping_logout.htm}" class="lightblue" th:text="#{messages.login.out}"></a>
          </span>
          <span th:case="false">
			  <span th:text="#{messages.welcome.word}"></span><span th:text="${config.websitename}"></span>
             <span class="pxlr">
               <a th:href="@{/user/login.htm}" class="lightblue" th:text="#{messages.login}"></a>
             </span>
            <span class="pxlr" th:text="#{messages.or}"></span>
            <span class="pxlr">
              <a th:href="@{/register.htm}" class="lightblue" th:text="#{messages.register}"></a>
            </span>
          </span>
        </span>
    </div>
</div>


<div class="page_width">
    <div class="main_top">
        <div class="head">
            <div>
                <input type="hidden" id="user" th:value="${user}"/>
                <input type="hidden" id="userId" th:value="${goodsStore.user.id}"/>
                <input type="hidden" id="storeId" th:value="${goodsStore.id}"/>
            </div>
            <div class="logo">
                <a th:href="@{/index.htm}">
                    <img th:if="${goodsStore.storeLogo}"   th:src="@{${goodsStore.storeLogo.path}+'/'+${goodsStore.storeLogo.name}}" border="0" width="180" height="60" />
                    <img th:unless="${goodsStore.storeLogo}" th:src="@{/style/system/front/default/images/logo.png}" border="0"/>
                </a>
            </div>
            <div class="shop_top_search">
                <div class="top_search_left">
                    <div class="filter_z">
                        <div class="top_searleft"></div>
                        <div class="top_nofilter">
                            <div class="top_sear_kf">
                                <a th:href="@{/store.htm(id=${goodsStore.id})}" th:text="${goodsStore.storeName}"></a>
                                <a target="_blank" th:href="@{http://wpa.qq.com/msgrd(v=3,uin=${goodsStore.storeQq},Site=${goodsStore.storeQq},Menu=yes)}">
                                    <img th:alt="#{messages.click.sendmessage}" th:src="@{http://wpa.qq.com/pa(p='2:'+${store.storeQq} +':51')}"/>
                                </a>
                                <!--th:src="@{http://wpa.qq.com/pa(p=2:${goodsStore.storeQq}:51)}"-->
                            </div>
                            <div class="top_sear_star">
                                <a th:if="${user == null}" th:href="@{/user_dialog_login.htm}" th:text="#{messages.click.collect}" class="top_sc" dialog_width="450" dialog_height="100"></a>
                                <a th:unless="${user == null}" href="javascript:void(0);"  class="top_sc" th:text="#{messages.click.collect}"></a>
                                <span th:if="${credit==0}">
                                    <img th:src="@{style/common/images/level_-1.gif}"/>
                                </span>
                                <span th:unless="${credit == 0}">
                                        <img th:each="c : ${credits}" style="margin-left:1px;"
                                           th:src="@{style/common/images/level_2.gif}" width="18" height="18"/>
                                </span>
                            </div>
                        </div>
                    </div>
                    <b class="top_b"></b><b class="top_b2" style="display:none"></b>
                    <div class="top_sear_bom" style="display:none;">
                        <dl class="top_dl">
                            <dt>
                                <b th:text="#{messages.store.score}"></b>
                                <i th:text="#{messages.compare.other}"></i>
                            </dt>
                            <dd>
                                <ul class="top_dl_ul">
                                    <li>
                                        <i th:text="#{messages.consistent.description}"></i>
                                        <b th:text="${goodsStore.point.descriptionEvaluate}"></b>
                                        <em class="description_css">
                                            <strong th:text="${description_type}"></strong>
                                        </em>
                                    </li>
                                    <li>
                                        <i th:text="#{messages.service.attitude}"></i>
                                        <b th:if="${goodsStore.point}" th:text="${goodsStore.point.serviceEvaluate}"></b>
                                        <em th:class="${service_css}">
                                            <strong th:text="${service_type}"></strong>
                                            <span th:text="${service_result}"></span>
                                        </em>
                                    </li>
                                    <li>
                                        <i th:text="#{messages.delivery.speed}"></i>
                                        <b th:text="${goodsStore.point.shipEvaluate}"></b>
                                        <em th:class="${ship_css}">
                                            <strong th:text="${ship_type}"></strong>
                                            <span th:text="${ship_result}"></span>
                                        </em>
                                    </li>
                                </ul>
                            <dd>
                        </dl>
                        <dl class="top_dl">
                            <dt th:text="#{messages.shop.certification}"></dt>
                            <dd>
                                <span>
                                  <img th:original="@{'/style/common/images/card_approve_'+${goodsStore.cardApprove}+'.gif'}"/>
                                </span>
                                <span>
                                <img th:original="@{'/style/common/images/realstore_approve_'+${goodsStore.realstoreApprove}+'.gif'}"/>
                                </span>
                            <dd>
                        </dl>
                        <dl class="top_dl">
                            <dt th:text="#{messages.shop.information}"></dt>
                            <dd>
                                <span class="top_dl_width">
                                    <span th:text="#{messages.goods.amount}"></span>
                                    <span th:text="${goods_count == null ?'0' : goods_count}"></span>
                                </span>
                                <span class="top_dl_width">
                                    <span th:text="#{messages.praise.rate}"></span>
                                    <span th:text="${goodsStore.point.storeEvaluate1*100}+'%'"></span>
                                </span>
                                <span  class="top_dl_width">
                                    <span th:text="#{messages.store.creattime}"></span>
                                    <span th:text="${#dates.format(goodsStore.addtime,'yyyy-MM-dd')}"></span>
                                </span>
                                <span  class="top_dl_width">
                                    <span th:text="#{messages.favorite.popularity}"></span>
                                    <span th:text="${goodsStore.favoriteCount}"></span>
                                </span>
                            </dd>
                        </dl>
                    </div>
                </div>

                <form method="post" target="_blank" id="store_top_search_form">
                    <input name="store_id" type="hidden" th:value="${goodsStore.id}"/>
                    <div class="top_search_right">
                        <div class="top_search_bg"></div>
                        <div class="top_shop_seacher">
                            <span class="sear_shop">
                              <input name="keyword" type="text" id="keyword"/>
                            </span>
                            <span class="all_sear_btn">
                              <input name="" type="button" th:value="#{messages.search.all}" search_area="site" style="cursor:pointer;"/>
                            </span>
                            <span class="shop_sear_btn">
                              <input name="" type="button" th:value="#{messages.search.shop}" search_area="store" style="cursor:pointer;"/>
                            </span>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<div class="banner_width">
    <div class="shopbanner" >
        <img th:if="${goodsStore.store_banner != null }"th:original="@{'/'+${goodsStore.store_banner.path}+'/'+${goodsStore.store_banner.name}}" width="1002" height="100"/>
        <img th:unless="${goodsStore.store_banner != null }" th:original="@{'/style/shop/'+${goodsStore.template}+'/images/banner.jpg'}"  width="1002" height="100"/>
    </div>
</div>
<div class="nav_width">
    <div class="main">
        <div class="nav_bg">
            <div class="shopnav">
                <div class="shopnavul">
                    <ul>
                        <li id="store_index">
                            <a th:href="@{/store.htm(id=${storeNav.id})}" th:text="#{messages.home.page}"></a>
                        </li>
                        <li th:if="${goods_view}" id="store_goods" class="this">
                            <a  th:href="@{/store.htm(id=${goods_id})}" th:text="#{messages.goods.details}"></a>
                        </li>
                        <li th:if="${goods_list}" id="store_goods" class="this">
                            <a th:href="@{/goods_list.htm(store_id=${storeNav.id})}" th:text="#{messages.goods.list}"></a>
                        </li>
                        <li id="store_credit">
                            <a th:href="@{/store_credit.htm(id=${storeNav.id})}" th:text="#{messages.credit.rating}"></a>
                        </li>
                        <li id="store_info">
                            <a th:href="@{/store_info.htm(id=${storeNav.id})}" th:text="#{messages.store.details}"></a>
                        </li>
                        <li th:each="nav : ${navs}" th:id="${nav.id}">
                            <a th:href="@{/store_url.htm(id=${nav.id})}" target="_blank" th:text="${nav.title}"></a>
                            <!--#if($!nav.win_type=="new_win")-->
                            <a th:if="${nav.url != null && nav.url != ''}" th:href="@{'/'+${nav.url}}" target="_blank" th:text="${nav.title}"></a>
                        </li>
                    </ul>
                </div>
                <div class="shopnavs"></div>
            </div>
        </div>
    </div>
    <div class="navbotm"></div>
</div>

<div class="main">

    <div class="shop">
        <div class="shop_index">
            <div class="shop_repright">
                <div class="shop_report">
                    <span class="shop_respan">
                        <i th:text="#{messages.report.center}"></i>
                        <b class="shop_rep_top"></b>
                        <b class="shop_rep_botm" style="display:none;"></b>
                    </span>
                    <ul class="shop_reul" style="display:none">
                        <li>
                            <a th:if="${user == null}" th:href="@{/user_dialog_login.htm}" th:text="#{messages.memeber.login}"></a>
                            <a th:unless="${user == null}" href="javascript:void(0);" id="user_login" th:text="#{messages.report.thisgoods}"></a>
                        </li>
                    </ul>
                </div>
                <div class="shoptop">
                    <h1 th:text="${goodsStore.storeName}"></h1>
                    <div class="shopvalue">
                        <dl class="shopvdl">
                            <dt>
                                <span>
                                  <img th:if="${goodsStore.storeLogo != null}"
                                       th:src="@{'/'+${goodsStore.storeLogo.path}+'/'+${goodsStore.storeLogo.name}}" alt=""/>
                                  <img th:unless="${goodsStore.storeLogo != null}"
                                       th:src="@{${config.storeImage.path}+'/'+${config.storeImage.name}}" alt=""/>
                                </span>
                            </dt>
                            <dd>
                                <span>
                                    <span th:text="${goodsStore.storeOwer}"></span>
                                    <a th:href="@{/buyer/message_send.htm(userName=${goodsStore.user.username})}">
                                        <img th:original="@{/style/shop/green/images/mail.jpg}" /> <!--width="15" height="11"-->
                                    </a>
                                </span>
                                <span th:if="${credit == 0}">
                                    <img th:original="@{/style/common/images/level_-1.gif}"/>
                                </span>
                                <span th:unless="${credit == 0}">
                                    <img th:each="c : ${credits}" style="margin-left:1px;" th:original="@{/style/common/images/level_2.gif}"/>
                                </span>
                                </span>

                                    <span th:text="#{messages.favorite.popularity}"></span><span class="hui2" th:text="${goodsStore.point.storeEvaluate1 *100}+${'%'}"></span>
                            </dd>
                        </dl>
                        <h1 th:text="#{messages.store.score}"></h1>
                        <ul class="shop_movepj">
                            <li>
                                <i th:text="#{messages.consistent.description}"></i>
                                <b th:text="${goodsStore.point.descriptionEvaluate}"></b>
                                <em th:class="${description_css}">
                                    <strong th:text="${description_type}"></strong>
                                    <span th:text="${description_result}"></span>
                                </em>
                            </li>
                            <li>
                                <i th:text="#{messages.service.attitude}"></i>
                                <b th:text="${goodsStore.point.serviceEvaluate}"></b>
                                <em th:class="${service_css}">
                                    <strong th:text="${service_type}"></strong>
                                    <span th:text="${service_result}"></span>
                                </em>
                            </li>
                            <li>
                                <i th:text="#{messages.delivery.speed}"></i>
                                <b th:text="${goodsStore.point.shipEvaluate}"></b>
                                <em th:class="${ship_css}">
                                    <strong th:text="${ship_type}"></strong>
                                    <span th:text="${ship_result}"></span>
                                </em>
                            </li>
                        </ul>
                        <h1 th:text="#{messages.shop.information}"></h1>
                        <ul>
                            <li>
                                <span th:text="#{messages.store.creattime}"></span>
                                <span th:text="${#dates.format(goodsStore.addtime,'YYYY-MM-DD')}"></span>
                            </li>
                            <li>
                                <span th:text="#{messages.store.address}"></span>
                                <span th:text="${area}"> </span>
                            </li>

                            <li>
                                <span th:text="#{messages.goods.amount}"></span>
                                <strong class="blue" th:text="${obj.goods_store.goods_list.size()}"></strong>
                                <span th:text="#{messages.unit.items}"></span>

                            </li>
                            <li>
                                <span th:text="#{messages.favorite.popularity}"></span>
                                <strong class="blue" th:text="${goodsStore.favoriteCount}"></strong>
                                <span th:text="#{messages.unit.collect}"></span>
                                </li>
                        </ul>
                        <h1 th:text="#{messages.contact.way}"></h1>
                        <ul>
                            <li class="shopcusser">
                                <span th:text="#{messages.plateform.customer}"></span>
                                <span>

                              <a th:if="${user!=null}" class="im_common" href="javascript:void(0);"
                                 th:attr="user_id=${obj.goods_store.user.id},user_name=${obj.goods_store.user.username}" th:text="#{messages.consult.customer}"></a>
                                    <!-- th:id="${'userDialog_img_contact_'+obj.user.id}"-->

                               <a th:unless="${user!=null}" class="im_common" href="javascript:void(0);"
                                  dialog_uri="/user_dialog_login.htm"
                                  th:dialog_title="#{messages.memeber.login}"
                                  dialog_width="450" dialog_height="100" dialog_id="user_login" th:text="#{messages.consult.customer}"> </a>
                              </span>
                            </li>
                            <li class="shopcusser">
                                <span th:text="#{messages.site-off.customer}"></span>
                                <span>
                                    <a target="_blank"
                                       th:href="@{http://wpa.qq.com/msgrd(v=3,uin=${goodsStore.storeQq},Site=${goodsStore.storeQq},Menu=yes )}">
                                        <img th:src="@{http://wpa.qq.com/pa(p='2:'+${goodsStore.storeQq}+':51')}"/>
                                    </a>
                                </span>
                            </li>
                        </ul>
                    </div>
                    <div class="shop_botm_hid">
                        <ul class="shopboh">
                            <li class="collection">
                                <a th:if="${user != null}" id="report_goods">
                                    <span th:text="#{messages.collect.shop}"></span>
                                </a>
                                <a th:if="${user == null}" th:href="@{/user_dialog_login.htm}" dialog_width="450"
                                   dialog_height="100"
                                   dialog_id="user_login">
                                    <span th:text="#{messages.collect.shop}"></span>
                                </a>
                            </li>
                            <li class="this">
                                <span class="twocoad">
                                    <span th:text="#{messages.store.qrcode}"></span>
                                    <div class="shop_botmhbox" style="display:none;">
                                        <span>
                                            <img th:src="@{'/'+${config.uploadfilepath}+'/store/'+${goodsStore.id}+'/code.png'}"
                                                 width="140" height="140"/></span>
                                        <i>
                                            <span th:text="#{messages.scan.qrcode}"></span>
                                            <br/>
                                            <span th:text="#{messages.quick.collect}"></span>
                                        </i>
                                    </div>
                                </span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="productdeta">
                <h1>
                    <strong class="tuang_h" th:text="${obj.goodsName}"></strong>
                    <span class="tuang" th:if="${obj.groupBuy==2}" th:text="#{messages.group.buy}"></span>
                    <span class="tuang" th:if="${obj.bargainStatus==2}" th:text="#{messages.bargain}"></span>
                    <span class="tuang" th:if="${obj.activityStatus==2}" th:text="#{messages.activity}"></span>
                    <span class="tuang" th:if="${obj.combinStatus==2}" th:text="#{messages.combin}"></span>
                    <span class="tuang" th:if="${obj.deliveryStatus==2}" th:text="#{messages.buy.get}"></span>
                </h1>
                <div class="photoproduct">
                    <div class="photopro">
                        <a th:href="@{'/'+${obj.goods_main_photo.path}+'/'+${obj.goods_main_photo.name}}" class="jqzoom"  rel='gal1' th:title="#{messages.detail.photo}">
                            <img th:if="${obj.goods_main_photo != null}" th:src="@{'/'+${obj.goods_main_photo.path}+'/'+${obj.goods_main_photo.name}}"
                                 th:title="#{messages.detail.photo}" id="main_img" width="300" height="300" style="border:1px #666 solid;"/>
                            <img th:unless="${obj.goods_main_photo !=  null }" th:src="@{'/'+${config.goodsImage.path}+'/'+${config.goodsImage.name}}"th:title="#{messages.detail.photo}"
                                 id="main_img" width="300" height="300" style="border:1px #666 solid;"/>
                        </a>
                        <ul class="photoimgul">
                            <li class="this">
                                <a  class="zoomThumbActive"  href='javascript:void(0);'>

                                    <img th:if="${obj.goods_main_photo != null}"   th:src="@{'/'+${obj.goods_main_photo.path}+'/'+${obj.goods_main_photo.name} }" width="40" height="40"  onclick="img_switch(this);" style="cursor:pointer;"/>
                                    <img th:unless="${obj.goods_photos != null}" th:src="@{'/'+${config.goodsImage.path}+'/'+${config.goodsImage.name}}"
                                         width="40" height="40"
                                         onclick="img_switch(this);" style="cursor:pointer;"/>
                                </a>
                            </li>

                            <li th:each="img : ${obj.goods_photos}">
                                <!-- + ${'smallimage:/'}+${img.path+'/'+img.name+','}+ ${'largeimage:/'++img.path+'/'+img.name+'}'} -->
                                <a href='javascript:void(0);' th:data-path="${img.path}" th:data-name="${img.name}"

                                   th:rel="${'{gallery:'+ 'gal1,}'}">
                                    <img th:src="@{'/'+${img.path}+'/'+${img.name}+'_small.'+${img.ext}}"
                                         th:attr=" big_img='/'+${img.path}+'/'+${img.name}" width="40" height="40"
                                         onclick="img_switch(this);" style="cursor:pointer;"/>
                                </a>
                            </li>

                        </ul>

                        <div class="collection_goods">
                            <span>
                                <a th:if="${user == null }" th:href="@{/user_dialog_login.htm}" class="save_good"
                                   href="javascript:void(0);"  dialog_width="450" dialog_height="100" dialog_id="user_login" th:text="#{messages.click.collect}">
                                </a>
                                <a th:unless="${user == null }" class="save_good" href="javascript:void(0);">
                                    <span  th:text="#{messages.favorite.popularity}+${obj.goodsCollect}"></span>
                                </a>
                            </span>
                            <div class="enjoy_btn">
                                <a class="enjoy_a" href="javascript:void(0);" th:text="#{messages.share.inandout}"></a>
                                <div class="enjoy_box" style="display:none;">
                                    <span class="enjoy_b">
                                        <input th:if="${user == null }" name="goods_share_btn" type="button"
                                               id="goods_share_btn" th:value="#{messages.share.goods}"
                                               th:dialog_uri="@{/user_dialog_login.htm}" th:dialog_title="#{messages.memeber.login}"
                                               dialog_width="450" dialog_height="100" dialog_id="user_login"
                                        />
                                        <!--  dialog_uri='/'+goods_share.htm?goods_id=${obj.id}"-->
                                        <input th:unless="${user == null }" name="goods_share_btn" type="button"
                                               id="goods_share_btn" th:value="#{messages.share.goods}"
                                               th:attr="dialog_uri=@{/goods_share.htm(goods_id=${obj.id})}"
                                               th:dialog_title="#{messages.memeber.login}" dialog_width="450"
                                               dialog_height="400" dialog_id="goods_share"
                                        />
                                    </span>
                                    <span class="enjoy" th:utext="${config.shareCode}">  </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="productshop">
                        <div class="detailstop">
                            <ul>
                                <li>
                                    <span class="detbt" th:text="#{messages.goods.price}">  </span>
                                    <span class="through">
                                        <span th:text="${obj.goodsPrice}"></span>
                                    </span>
                                </li>

                                <li th:unless="${obj.groupBuy==2}">
                                    <span class="detbt" th:text="#{messages.store.price}+#{messages.money.class}"></span>
                                    <span class="pricedata">
                                        <strong class="orange" id="store_price" th:text="${ obj.storePrice}">
                                        </strong>
                                    </span>
                                    <span class="greenp">
                                        (
                                        <span th:text="#{messages.saving}"></span>
                                        <b id="rest" style="font-weight:normal;"
                                               th:text="#{messages.money.class}+${obj.goodsPrice.subtract(obj.storePrice) }">
                                        </b>)
                                    </span>
                                </li>

                                <li th:if="${obj.groupBuy==2}" th:each="groupGood :${groupGoods}">
                                    <input type="hidden" id="ggMaxCount" th:value="${groupGood.ggMaxCount}"/>
                                    <input type="hidden" id="ggCount" th:value="${groupGood.ggCount}"/>
                                    <span class="detbt" th:text="#{messages.group.price}"></span>
                                    <span class="pricedata">
                                        <strong class="orange" id="group_price"><span
                                                th:text="#{messages.money.class}+${groupGood.ggPrice}"></span></strong>
                                    </span>
                                    <span class="greenp">(
                                        <b id="rest" style="font-weight:normal;"
                                                                th:text="#{messages.saving}+${obj.goodsPrice.subtract(groupGood.ggPrice)}">)</b>)</span>
                                </li>

                                <li>
                                    <span class="detbt" th:text="#{messages.goods.weight}"></span>
                                    <span th:text="${obj.goodsWeight}"></span>
                                    <span th:text="#{messages.kilogram}"></span>
                                </li>
                                <li>
                                    <span class="detbt" th:text="#{messages.logistics.freight}"></span>
                                    <div class="logistics">
                                        <span class="start" th:text="${goodsStore.area.parent.areaname +'| '}+#{messages.to}"> </span>

                                        <div class="log_ps">
                                            <span class="log_d">
                                                <a href="javascript:void(0);">
                                                    <em id="current_city_info" th:text="${current_city}"></em>
                                                    <i></i>
                                                </a>
                                            </span>
                                            <div class="goods_ct" style="display:none;">
                                                <h3>
                                                    <span class="h3_l" th:text="#{messages.choose.city}"></span>
                                                    <span class="h3_r">
                                                        <a href="javascript:void(0);">
                                                            <img th:src="@{/style/shop/default/images/14-14.png}"/>
                                                        </a>
                                                    </span>
                                                </h3>
                                                <p>
                                                    <span th:text="#{messages.current.location}"></span>
                                                    <span th:text="${current_city}"></span>
                                                </p>
                                                <div class="Region">
                                                    <ul>
                                                        <li class="item" th:each="area : ${areas}">
                                                            <a href="javascript:void(0);"
                                                               th:attr="area_id=${area.id},area_name=${area.areaname}"
                                                               th:text="${area.areaname}">
                                                            </a>
                                                            <div class="Cities" style="display:none;">
                                                                <ul>
                                                                    <li th:each="c_area : ${area.childs}">
                                                                        <a href="javascript:void(0);"  th:attr="city_id=${c_area.id},city_name=${c_area.areaname}"
                                                                           th:text="${c_area.areaname}"></a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <span th:if="${obj.goodsTransfee==1}" class="detbt" th:text="#{messages.seller.bears}"></span>
                                        <span th:unless="${obj.goodsTransfee==1}">
                                            <span th:if="${obj.transport != null}">
                                              <span th:if="${obj.transport.transMail}">
                                                  <span th:text="#{messages.surface.mail}"></span>
                                                  <i id="goods_mail_fee" th:text="#{messages.money.class}+${mailFee }"></i>
                                                </span>
                                              <span th:if="${obj.transport.transExpress}">
                                                  <span th:text="#{messages.express.delivery}"></span>
                                                  <i id="goods_express_fee"> <span
                                                      th:text="#{messages.money.class}+${expressFee}"></span></i>
                                              </span>
                                              <span th:if="${obj.transport.transEms}">
                                            EMS: <i id="goods_ems_fee"><span
                                                      th:text="#{messages.money.class}+${emsFee}"></span>  </i> </span>
                                            </span>
                                            <span th:unless="${obj.transport}">
                                               <span th:text="#{messages.surface.mail}+#{messages.money.class}+${obj.mailTransFee}"></span>
                                               <span th:text="#{messages.express.delivery}+#{messages.money.class}+${obj.expressTransFee}"></span>
                                               <span th:text="'EMS'+#{messages.money.class}+${obj.emsTransFee}"></span>
                                            </span>
                                        </span>
                                    </div>
                                </li>
                                <li th:if="${obj.dg != null}">
                                    <span class="detbt" th:text="#{messages.giveaway}"></span>
                                    <span style="margin-right:10px;width:360px;overflow:hidden;" >
                                        <a th:href="@{/goods.htm(id=${obj.dg.dDeliveryGoodsId})}" target="_blank"
                                           th:text="${obj.dg.d_delivery_goods.goodsName}"></a>
                                    </span>
                                    <span style="float:left;margin-left:90px;width:360px;overflow:hidden;">
                                        <a th:href="@{/goods.htm(id=${obj.dg.dDeliveryGoodsId})}" target="_blank">
                                            <img th:if="${obj.dg.d_delivery_goods.goods_main_photo}"
                                                 th:src="@{'/'+${obj.dg.d_delivery_goods.goods_main_photo.path}+'/'+${obj.dg.d_delivery_goods.goods_main_photo.name}+'_small.'+${obj.dg.d_delivery_goods.goods_main_photo.ext}}"
                                                 width="60" height="60"/>
                                            <img th:unless="${obj.dg.d_delivery_goods.goods_main_photo}"
                                                 th:src="@{'/'+${onfig.goodsImage.path}+'/'+${config.goodsImage.name}}"
                                                 width="60" height="60"/>
                                      </a>
                                    </span>
                                </li>
                                <!--物流运费新增end-->
                                <li>
                                    <span class="detbt" th:text="#{messages.sales}"></span>
                                    <span>
                                         <span th:text="#{messages.sold}+${obj.goodsSalenum }+#{messages.unit.items}+'(' +${obj.evaluates.size()}+#{messages.unit.comment}+')'"></span>
                                    </span>
                                </li>
                                <li>
                                    <span class="detbt" th:text="#{messages.attention.number}"></span>
                                    <span th:text="${obj.goodsClick}+#{messages.times}"></span>
                                </li>
                            </ul>
                        </div>

                        <div class="detail_solid">

                        </div>
                        <div class="detailsbottom_ps">
                            <div class="detailsbottom" id="goods_spec_info">
                                <ul>
                                    <li id="goods_spec_chose" class="detail_chose" style="display:none;" th:text="#{messages.select.attributes}"><!---->
                                    </li>
                                    <li th:if="${obj.specification != null}" class="colordate"  th:each="spec : ${obj.specification}">
                                        <span class="datespan" th:text="${spec.name}">：</span>
                                        <span class="chosecolor">
                                            <span th:each="gsp : ${obj.goods_specs}">
                                                <b style="font-weight:lighter;" th:if="${gsp.spec.id == spec.id}">
                                                    <a href="javascript:void(0);" th:data-id="${obj.id}" th:onclick="goods_spec_set(this,this.getAttribute('data-id'));" th:attr="spec=${gsp.spec.id},gsp=${gsp.id}" th:text="${gsp.value}"></a>
                                                </b>
                                            </span>

                                        </span>
                                    </li>
                                    <!-- #end-->
                                    <li class="stockdate">
                                        <span class="datespan" th:text="#{messages.amount}"></span>
                                        <span class="stock">
                                            <input name="goods_count" type="text" id="goods_count" value="1"/>
                                        </span>
                                        <span class="stockparts">
                                            <span th:if="${obj.groupBuy==2}" th:text="#{messages.group.remain}"></span>
                                            <span th:unless="${obj.groupBuy==2}" th:text="#{messages.inventory}"></span>
                                            <span th:if="${obj.groupBuy==2}">
                                                <span th:each="gg_info : ${groupGoods}">
                                                        <b id="goods_inventory" style="font-weight:normal;"  th:text="${gg_info.ggCount}+#{messages.item}"></b>
                                                </span>
                                            </span>
                                            <span th:unless="${obj.groupBuy==2}">
                                                <b id="goods_inventory" style="font-weight:normal;" th:text="${obj.goodsInventory}+#{messages.item}"></b>
                                            </span>
                                        </span>
                                    </li>
                                    <li>
                                        <span class="datespan">&nbsp;</span>
                                        <input type="hidden" th:if="${user}" id="userstoreId" th:value="${user.storeId !=null ? user.storeId :''}"/>
                                        <span class="addcar">
                                            <input name="input" th:data-id="${obj.id}" th:data-name="${obj.goodsStoreId}" type="button" th:value="#{messages.addto.cart}" th:onclick="add_cart(this.getAttribute('data-id'),this.getAttribute('data-name'))"/>
                                        </span>
                                        <span class="atonce">
                                            <input name="input" type="button" th:value="#{messages.buy.now}" th:data-name="${obj.id }" th:data-id="${obj.goodsStoreId}" th:onclick="buy_goods(this.getAttribute('data-name'),this.getAttribute('data-id'))"/>
                                        </span>
                                        <div class="goodscar" style="display:none;z-index:999;">
                                            <div>
                                                <a href="javascript:void(0);" onclick="javascript:jQuery('.goodscar').hide();" class="closed">
                                                    <img th:src="@{/style/shop/default/images/closed.jpg}"  width="12" height="12"/>
                                                </a>
                                            </div>
                                            <ul>
                                                <li th:text="#{messages.cart.success}"></li>
                                                <li>
                                                    <span th:text="#{messages.cart.total}"></span>
                                                    <strong class="orange" id="cart_goods_count">0</strong>
                                                    <span th:text="#{messages.baby.tatolfee}+#{messages.money.class}"></span>
                                                    <strong class="orange" id="cart_goods_totalprice">0.00</strong>
                                                </li>
                                                <li>
                                                    <a th:if="${user}" th:href="@{/goods_cart1.htm}" class="go_cart" th:text="#{messages.pay.now}"></a>
                                                    <a th:unless="${user}"
                                                       href="javascript:if(confirm('您尚未登录，现在登录?'))window.location.href='/user/login.htm?url=/goods_cart1.htm'"
                                                       class="go_cart" th:text="#{messages.pay.now}"></a>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div class="Close" id="goods_spec_info_close" style="display:none;">
                                <a href="javascript:void(0);">X</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="shop_index_box">
            <!-- store-left  -->
            <div class="shopindex_left">
                <div class="shopclassify">
                    <h1 th:text="#{messages.goods.categories}"></h1>
                    <ul class="shopcul">
                        <li>
                            <span>
                                <img th:src="@{'/style/shop/'+${goodsStore.template}+'/images/add2.jpg'}" width="15"
                                     height="15"/>
                            </span>
                            <a th:href="@{/goods_list.htm(store_id=${goodsStore.id})}" class="oneclass" th:text="#{messages.all.goods}"></a>
                        </li>
                        <li th:each="ugc : ${ugcs}" th:if="${ugc.display}">
                            <span th:id="'ugc_'+${ugc.id}" ugc_type="show" ugc_id="${ugc.id}">
                              <img th:src="@{'/style/shop/'+${goodsStore.template}+'/images/add2.jpg'}" width="15"
                                   height="15"/>
                            </span>
                            <a th:href="@{/goods_list.htm(gc_id=${ugc.id},store_id=${store.id})}" class="oneclass"
                               th:text="${ugc.classname}"></a>
                            <ul th:if="${ugc.childs.size()>0}" th:id="'ugc_child_'+${ugc.id}">
                                <li th:each="cugc : ${ugc.childs}" th:if="${cugc.display}">
                                    <a th:href="@{/goods_list.htm(gc_id=${cugc.id},store_id=${goodsStore.id})}"
                                       th:text="${cugc.classname}"></a></li>
                            </ul>

                        </li>

                    </ul>
                </div>
                <form th:action="@{/store_goods_search.htm}" method="post" id="store_search_form">
                    <div class="shopsearch">
                        <ul>
                            <li>
                                <span class="searspan" th:text="#{messages.keyword}"></span>
                                <span class="shopsear1">
                                    <input name="keyword" type="text" id="keyword"/>
                                </span>
                            </li>
                            <li>
                                <span class="searspan">&nbsp;</span>
                                <span class="searbtns">
                                  <input name="input2" type="submit" th:value="#{messages.search}" style="cursor:pointer;"/>
                                </span>
                                <input name="store_id" type="hidden" id="store_id" th:value="${store.id}"/>
                            </li>
                        </ul>
                    </div>
                </form>
                <div class="shopf">
                    <h1 th:text="#{messages.friend.link}"></h1>
                    <ul>
                        <li th:each="partner : ${partners}">
                            <a th:href="@{'/'+${partner.url}}" target="_blank" th:text="${partner.title}"></a>
                        </li>

                    </ul>
                </div>
            </div>



            <div class="shopindex_right">
                <div class="switch_bar" id="switch_bar">
                    <span class="sbar_open" style="display:none">
                        <a class="sbar_open_btn" href="javascript:void(0);"></a>
                    </span>
                    <span class="sbar_close">
                        <a class="sbar_close_btn" href="javascript:void(0);"></a>
                    </span>
                </div>
                <div class="Group" th:if="${obj.combinStatus==2}">
                    <div class="selled">
                        <ul>
                            <li class="this" th:text="#{messages.recommend.combin}"></li>
                        </ul>
                    </div>
                    <div class="Group_main">
                        <div class="Group_left">
                            <i>
                                <img th:src="@{/style/shop/default/images/23x23.png}"/>
                            </i>
                            <div class="G_pic">
                                <span>
                                    <a th:href="@{/goods.htm(id=${obj.id})}">
                                        <img th:if="${obj.goods_main_photo}"
                                             th:src="@{'/'+${obj.goods_main_photo.path}+'/'+${obj.goods_main_photo.name}}"
                                             width="122" height="122"/>
                                        <img th:unless="${obj.goods_main_photo}"
                                             th:src="@{'/'+${config.goodsImage.path}+'/'+${config.goodsImage.name}}"
                                             width="122" height="122"/>
                                    </a>
                                </span>
                                <span>
                                    <a th:href="@{/goods.htm(id=${obj.id})}" th:text="${obj.goodsName}"></a>
                                </span>
                            </div>
                        </div>
                        <div class="Group_mid">
                            <ul>

                                <li th:each=" info : ${obj.combin_goods}">
                                    <i> <img th:src="@{/static/style/shop/default/images/23x23.png}"/> </i>
                                    <div class="li_lf">
                                        <span>
                                            <a th:href="@{/goods.htm(id=${info.id})}" target="_blank">
                                                <img th:if="${info.goods_main_photo}"
                                                     th:src="@{'/'+${info.goods_main_photo.path}+'/'+${info.goods_main_photo.name}}"
                                                     width="122" height="122"/>
                                                <img th:unless="${info.goods_main_photo}"
                                                     th:src="@{'/'+${config.goodsImage.path}+'/'+${config.goodsImage.name}}"
                                                     width="122" height="122"/>
                                            </a>
                                        </span>
                                        <span>
                                            <a th:href="@{/goods.htm(id=${info.id})}" target="_blank"
                                               th:text="${info.goodsName}"></a>
                                        </span>
                                        <div class="choose">
                                            <b>￥<b th:text="${info.goodsCurrentPrice}"></b></b>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="Group_right">
                            <i>
                                <img th:src="@{/style/shop/default/images/23x15.png}"/>
                            </i>
                            <div class="i_right">
                                <span th:text="#{messages.combin.cheap}"></span>
                                <span class="sp_color"><b th:text="#{messages.match.price}+#{messages.money.class}+${obj.combinPrice}"></b></span>
                                <span class="sp_color"  th:text="${'获得优惠：￥'+(goods_total_price - obj.combin_price)}"></span>
                                <span>
                                    <a href="javascript:void(0);" onclick="buy_goods('combin');" th:text="#{messages.buy.combin}"></a>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="shopselled" id="goods_anchor" name="goods_anchor">
                    <div class="selled" id="goods_tab">
                        <ul class="selled_ul">
                            <li class="this" id="details"
                                th:uri="@{/goods_detail.htm(goods_id=${obj.id},store_id=${obj.goodsStoreId})}" style="cursor:pointer">
                                <a href="#goods_anchor" th:text="#{messages.goods.details}"></a>
                            </li>
                            <li id="evaluation" th:uri="@{/goods_evaluation.htm(goods_id=${obj.id},id=${obj.goodsStoreId})}">
                                <a href="#goods_anchor" th:text="#{messages.comment.details}"></a></li>
                            <li id="strike" th:uri="@{/goods_order.htm(goods_id=${obj.id},id=${obj.goodsStoreId})}"><a
                                    href="#goods_anchor" th:text="#{messages.transaction.record}"></a></li>
                            <li id="advice" th:uri="@{/goods_consult.htm(goods_id=${obj.id},id=${obj.goodsStoreId})}"><a
                                    href="#goods_anchor" th:text="#{messages.goods.consult}"></a></li>
                        </ul>
                        <span class="selled_kf" style="display:none;">
                            <a target="_blank"
                               th:href="@{http://wpa.qq.com/msgrd(v=3,uin=${store.storeQq},Site=store.storeQq,Menu=yes)}">
                                <img th:alt="#{messages.click.sendmessage}" th:src="@{http://wpa.qq.com/pa(p='2:'+${store.storeQq}+':51')}"/>
                            </a>
                        </span>
                    </div>
                    <div class="img_center_load" style="display:none;text-align:center; padding-top:5px;">
                        <img  height="28" width="28" th:src="@{/style/common/images/loader.gif}"/></div>
                    <div class="selleddetails">
                        <!--商品详情-->
                        <div class="goodsdetails" id="details_tab">
                            <div class="goodsintro">
                            </div>
                            <div style="margin-top:10px;" th:utext="${obj.goodsDetails}" id="goodsdetail"></div>
                        </div>
                    </div>
                    <div class="regoods">
                        <h1>
                            <a th:href="@{/goods_list.htm(store_id=${goodsStore.id},recommend=true)}">更多</a>
                            <span th:text="#{messages.recommend.goods}"></span></h1>
                        <div class="smallgoods">
                            <ul th:each="goods : ${goods_recommend_list}">
                                <li class="goodsimgs"><span class="goods_sp_span">
                                <p>
                                    <a th:href="@{/goods.htm(id=${goods.id})}">
                                        <img th:if="${goods.goods_main_photo}"
                                             th:src="@{'/'+${goods.goods_main_photo.path}+'/'+${goods.goods_main_photo.name}}"
                                             original=""
                                             onerror="this.src='/'+${config.goodsImage.path}+'/'+${config.goodsImage.name};"
                                             width="185" height="185"/>
                                        <img th:unless="${goods.goods_main_photo}"
                                             th:src="@{'/'+${config.goodsImage.path}+'/'+${config.goodsImage.name}}"
                                             original=""
                                             onerror="this.src='/'+${config.goodsImage.path}+'/'+${config.goodsImage.name};"
                                             width="185" height="185"/>
                                    </a>
                                </p>
                                </span>
                                </li>
                                <li class="goodslook">
                                    <a th:href="@{/goods.htm(id=${goods.id})}" class="look" th:text="#{messages.see.details}"></a>
                                    <strong th:text="#{messages.money.class}+${goods.storePrice}"></strong>
                                </li>
                                <li class="goodsnames">
                                    <a th:href="@{/goods.htm(id=${goods.id})}" th:text="${goods.goodsName}"></a>
                                </li>
                                <li class="recentgoodsok">
                                    <span th:text="#{messages.recent.transaction}"></span>
                                    <strong th:text="${goods.goodsSalenum}+#{messages.sum}"></strong></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <input id="groupmsg" type="hidden" th:value="${group}"/>
            <input id="gropBuy"  type="hidden" th:value="${obj.groupBuy}"/>
            <input id="goodsCurrentPrice"  type="hidden" th:value="${obj.goodsCurrentPrice}"/>
            <input id="goodsInventory"  type="hidden" th:value="${obj.goodsInventory}"/>
            <input id="goodsList"  type="hidden" th:value="${obj.group_goods_list}"/>
            <input th:if="${obj.group}"  type="hidden" id="groupId" th:value="${obj.group.id}"/>
            <input id="usermsg"  type="hidden" th:value="${user}"/>
            <input id="goodsProperties"  type="hidden" th:value="${obj.goodsProperty}"/>
            <input id="userId"  type="hidden" th:value="${goodsStore.user.id}"/>
            <input id="goodsId"  type="hidden"  th:value="${obj.id}"/>
        </div>

        <div class="footer">
            <div class="footerArea">
                <ul>
                    <li>
                <span th:each="nav : ${footer}">
                    <a th:if="${nav.newWin == 1}" target="_blank" th:text="${nav.title}"> </a>
                    <a th:if="${nav.newWin !=1 }" target="_blank" th:text="${nav.title}"> </a>
                </span>
                    </li>
                    <li class="hui2">Copyright 2020 shopping Inc. All rights reserved</li>
                    <li class="hui2">Powered by shopping 2.x</li>
                    <li th:text="${config.codeStat}"></li>
                </ul>
            </div>
        </div>

    </div>
</div>
</body>
<script>
    jQuery("#goods_anchor > div >ul >li ").click(
        function () {
            var url = jQuery(this).attr("uri");
            jQuery.post(url, function (res) {
                console.debug(res);
            });
        }
    );
    var user =jQuery("#usermsg").val();
    var goodsId = jQuery("#goodsId").val();
    var userId = jQuery("#userId").val();
    function goods_spec_set(id) {
        var spec = jQuery(this).attr("spec");
        var gsp = "";
        var load = true;
        jQuery(".colordate a[spec=" + spec + "]").removeClass("this");
        jQuery(obj).addClass("this");
        jQuery(".colordate").each(function () {
            jQuery.each(jQuery(this).find("a[class=this]"), function () {
                gsp = jQuery(this).attr("gsp") + "," + gsp;
            });
        });
        jQuery(".colordate").each(function () {
            if (jQuery(this).find("a[class=this]").length == 0) load = false;
        });
        if (load) {
            jQuery("#goods_spec_info").removeClass().addClass("detailsbottom");
            jQuery("#goods_spec_info_close").hide();
            jQuery("#goods_spec_chose").hide();
            jQuery.post("/load_goods_gsp.htm", {"id":id, "gsp": gsp}, function (data) {
                goods_inventory = data.count;
                store_price = data.price;
                jQuery("#goods_inventory").html(goods_inventory);
                jQuery("#store_price").html("¥" + store_price);
                jQuery("#rest").html("¥" + (goods_price - store_price));
            }, "json");
        }
    }

    function img_switch(obj) {
        jQuery(".photoimgul li").removeClass("this");
        jQuery(obj.parentNode.parentNode).addClass("this");
        var src = jQuery(obj).attr("big_img");
        jQuery("#main_img").attr("src", src);
    }

    var group = 0;
    var groupBuy = jQuery("#gropBuy").val();
    var current_price = jQuery("#goodsCurrentPrice").val();
    var price;
    var goods_inventory;
    if (groupBuy == '2') {
       price=jQuery("#group_price").val();
        var ggMaxCount=jQuery("#ggMaxCount").val();
       if (ggMaxCount>0){
           goods_inventory=ggMaxCount;
       }else{
           goods_inventory=jQuery("#ggCount").val();
       }
    }else{
       price=jQuery("#store_price").val();
       goods_inventory = jQuery("#goodsInventory").val();
    }

    //改价格
    var goods_price = current_price;
    jQuery(document).ready(function () {
        jQuery('.jqzoom').jqzoom({
            zoomType: 'standard',
            zoomWidth: 480,
            zoomHeight: 300,
            lens: true,
            preloadImages: false,
            alwaysOn: false,
            title: true,
            preloadText: '努力加载'
        });
//初始化数据

        var data = jQuery("#goodsProperties").val();
        if (data != "") {
            var properties = eval("(" + data + ")");
            jQuery.each(properties, function (index, item) {
                jQuery(".goodsintro").append("<span>" + item.name + ":" + item.val + "</span>");
            });
        }
//
        jQuery(".selled li").click(function () {
            jQuery(".selled li").each(function () {
                var id = jQuery(this).attr("id") + "_tab";
                jQuery(this).removeClass("this");
            });
            jQuery(this).addClass("this");
            var uri = jQuery(this).attr("uri");
            jQuery(".selleddetails").empty();
            jQuery(".img_center_load").show();
            jQuery.post(uri, "", function (data) {
                jQuery(".img_center_load").hide();
                jQuery(".selleddetails").append(data);
            }, "text");
        }).mouseover(function () {
            jQuery(this).css("cursor", "pointer");
        });

        jQuery(".collection_goods a[class=save_good]").click(function () {
            if (user.id == jQuery("#userId").val())
                alert("不能收藏自己的商品");
            else {
                jQuery.post("/add_goods_favorite.htm", {"id": goodsId}, function (data) {
                    if (data == 0) {
                        alert("商品收藏成功！");
                    }
                    if (data == 1) {
                        alert("已经收藏该商品！");
                    }
                }, "text");
            }
        });

        if (user) {
            jQuery("#report_goods").click(function () {
                if (user.id == userId)
                    alert("不能举报自己的商品");
                else
                    window.location.href = "/buyer/report_add.htm?goods_id=" + goodsId;

            })

        }

        jQuery("#goods_count").keyup(function () {
            var goods_count = jQuery(this).val();
            if (goods_count > goods_inventory) {
                if (groupBuy == 2)
                    if (obj.group_goods.gg_max_count > 0)
                        alert("超出团购运行最大数量，请重新输入购买数量");
                    else
                        alert("超出团购库存数量，请重新输入购买数量");

                else
                    alert("超出店铺库存，请重新输入购买数量");
                jQuery(this).val(goods_inventory);
            }
        });
        //
        jQuery(".twocoad").css("cursor", "pointer").mouseover(function () {
            jQuery(".shop_botmhbox").fadeIn('fast');
        }).mouseleave(function () {
            jQuery(".shop_botmhbox").fadeOut('fast');
        });
        jQuery(".shop_report").css("cursor", "pointer").mouseover(function () {
            jQuery(".shop_reul").fadeIn("normal");
            jQuery(".shop_rep_top").hide();
            jQuery(".shop_rep_botm").show();
        }).mouseleave(function () {
            jQuery(".shop_reul").fadeOut("normal");
            jQuery(".shop_rep_top").show();
            jQuery(".shop_rep_botm").hide();
        });
//
        var switch_loaded = true;
        var goods_tab_loaded = true;
        var switch_top = jQuery("#switch_bar").offset().top;
        var goods_tab_top = jQuery("#goods_tab").offset().top;
        var switch_left = jQuery("#switch_bar").offset().left;

        jQuery(window).scroll(function () {
            var scrolla = jQuery(window).scrollTop();
            var switch_cha = parseInt(switch_top) - parseInt(scrolla);
            if (switch_loaded && switch_cha <= 30) {
                jQuery("#switch_bar").removeClass("switch_bar").css({
                    "position": "fixed",
                    "top": "30px",
                    "z-index": "100"
                });
                switch_loaded = false;
            }

            if (!switch_loaded && switch_cha > 30) {
                switch_loaded = true;
                jQuery("#switch_bar").removeClass().addClass("switch_bar").css({
                    "position": "absolute",
                    "top": "30px",
                    "z-index": "100"
                });
            }
            var goods_tab_cha = parseInt(goods_tab_top) - parseInt(scrolla);
            if (goods_tab_loaded && goods_tab_cha <= 0) {
                jQuery("#goods_tab").css({
                    "position": "fixed",
                    "top": "0px",
                    "background": "#fff",
                    "border-bottom": "#ccc solid 1px",
                    "overflow": "hidden"
                });
                jQuery(".selled_kf").show();
                goods_tab_loaded = false;
            }
            if (!goods_tab_loaded && goods_tab_cha > 0) {
                goods_tab_loaded = true;
                jQuery(".selled_kf").hide();
                jQuery("#goods_tab").css({"position": "relative", "border-bottom": "none", "overflow": "visible"});
            }
        });
//
        jQuery(".sbar_close").attr("cursor", "pointer").click(function () {
            jQuery(".shopindex_left").fadeOut("normal");
            jQuery(".sbar_open").show();
            jQuery(".sbar_close").hide();
            jQuery(".shopindex_right").css({"width": "100%"});
            jQuery(".regoods").css("width", "100%");
            jQuery(".regoods h1").css("width", "100%");
            jQuery(".regoods .smallgoods").css("width", "100%");
            jQuery(".regoods .smallgoods ul").css("margin-right", "40px");
        });
        jQuery(".sbar_open").attr("cursor", "pointer").click(function () {
            jQuery(".shopindex_left").fadeIn("normal");
            jQuery(".sbar_close").show();
            jQuery(".sbar_open").hide();
            jQuery(".shopindex_right").css("width", "797px");
            jQuery(".regoods h1").css("width", "797px");
            jQuery(".regoods .smallgoods").css("width", "797px");
            jQuery(".regoods .smallgoods ul").css("margin-right", "4px");
        });
        jQuery(".smallgoods .goodsimgs img").lazyload({effect: "fadeIn", width: 178, height: 170});
//
        jQuery(".log_d>a").click(function () {
            jQuery(this).parent().parent().find(".goods_ct").show();
        });
//
        jQuery(".h3_r>a").click(function () {
            jQuery(".Cities").hide();
            jQuery(this).parent().parent().parent().hide();
        });
//
        jQuery(".item a").click(function () {
            jQuery(".Cities").hide();
            jQuery(this).parent().find(".Cities").show();
        });
//
        jQuery(".Cities > ul > li > a").click(function () {
            var goodsId=jQuery("#goodsId").val();
            var city_name = jQuery(this).attr("city_name");
            jQuery.ajax({
                type: 'POST',
                url: '/trans_fee.htm',
                dataType: 'json',
                data: {"city_name": city_name, "goods_id": goodsId},
                beforeSend: function () {
                    jQuery("#current_city_info").html("<img style='padding-top:3px;' src='/style/common/images/wait.gif' width='14' height='14' />");
                    jQuery("#goods_mail_fee").html('<img style="padding-top:3px;" src="/style/common/images/wait.gif" width="14" height="14" />');
                    jQuery("#goods_express_fee").html('<img style="padding-top:3px;" src="/style/common/images/wait.gif" width="14" height="14" />');
                    jQuery("#goods_ems_fee").html('<img style="padding-top:3px;" src="/style/common/images/wait.gif" width="14" height="14" />');
                },
                success: function (json) {
                    console.log(json);
                    console.log(typeof json);
                    jQuery("#current_city_info").html(json.current_city_info);
                    jQuery("#goods_mail_fee").html('¥' + json.mail_fee);
                    jQuery("#goods_express_fee").html('¥' + json.express_fee);
                    jQuery("#goods_ems_fee").html('¥' + json.ems_fee);
                }
            });
            jQuery(".Cities").hide();
            jQuery(".goods_ct").hide();
        });
//
        jQuery("#goods_spec_info_close>a").click(function () {
            jQuery("#goods_spec_info").removeClass().addClass("detailsbottom");
            jQuery("#goods_spec_info_close").hide();
            jQuery("#goods_spec_chose").hide();
        });
//
        jQuery(".enjoy_btn").mouseover(function () {
            jQuery(".enjoy_box").show();
        }).mouseleave(function () {
            jQuery(".enjoy_box").hide();
        });
//
    });
    var time = 0;
    var time_id;

    function add_cart(id,storeId) {
        var groupBuy = jQuery("#gropBuy").val();
        var userstoreId = jQuery("#userstoreId").val();
        if (groupBuy == '2') {
           var price=jQuery("#group_price").text();
            var ggMaxCount=jQuery("#ggMaxCount").val();
            if (ggMaxCount>0){
              var goods_inventory=ggMaxCount;
            }else{
               var goods_inventory=jQuery("#ggCount").val();
            }

        }else{
            var price=jQuery("#store_price").text();
            var goods_inventory = jQuery("#goodsInventory").val();
        }
        if (user) {
            if (userstoreId == storeId) {
                alert("不能购买自己的商品！");
            } else {
                console.log("------可以购物----");
                var add = true
                var gsp = "";
                if (jQuery(".colordate").length == 0) {
                    add = true;
                } else {
                    jQuery(".colordate").each(function () {
                        jQuery.each(jQuery(this).find("a[class=this]"), function () {
                            gsp = jQuery(this).attr("gsp") + "," + gsp;
                        });
                        if (jQuery(this).find("a[class=this]").length == 0) add = false;
                    });
                }
                var count = jQuery("#goods_count").val();
                if (count == 0) {
                    add = false;
                    alert("至少购买一件商品!");
                    return;
                }
                console.log("---库存----"+goods_inventory);
                if (goods_inventory == 0) {
                    add = false;
                    alert("商品库存为0,不能购买!");
                    return;
                }
                if (add) {
                    console.log("------添加到购物车的价格----"+price);
                    jQuery.post("/add_goods_cart.htm", {
                        "id": id,
                        "count": count,
                        "price": price,
                        "gsp": gsp
                    }, function (res) {
                        var data =JSON.parse(res);
                        jQuery("#cart_goods_count").html(data.count);
                        jQuery("#cart_goods_totalprice").html(data.total_price);
                        jQuery(".goodscar").fadeIn();
                        time_id = window.setInterval(cart_fadeOut, 1000);
                        //更新顶部购物车信息
                        jQuery("#cart_goods_count_top").html(data.count);
                    });
                } else {
                    jQuery("#goods_spec_info").removeClass().addClass("detailsbottom detailsbottom_hover");
                    jQuery("#goods_spec_info_close").show();
                    jQuery("#goods_spec_chose").show();
                }
            }
        } else {
            alert("请登录再添加");
        }

    }

    function cart_fadeOut() {
        time++;
        if (time == 3) {
            jQuery(".goodscar").fadeOut();
            time = 0;
            window.clearInterval(time_id);
        }
    }

    function buy_goods(id,storeId) {
        var groupBuy = jQuery("#gropBuy").val();
        var userstoreId = jQuery("#userstoreId").val();
        if (groupBuy == '2') {
            var price=jQuery("#group_price").text();
            var ggMaxCount=jQuery("#ggMaxCount").val();
            if (ggMaxCount>0){
                var goods_inventory=ggMaxCount;
            }else{
                var goods_inventory=jQuery("#ggCount").val();
            }

        }else{
            var price=jQuery("#store_price").text();
            var goods_inventory = jQuery("#goodsInventory").val();
        }

        console.log("userid=="+user.id +"userId>>>>>>"+ userId)
        if (userstoreId == storeId){
            alert("不能购买自己的商品！");
        }else {
            var add = true
            var gsp = "";
            if (jQuery(".colordate").length == 0) {
                add = true;
            } else {
                jQuery(".colordate").each(function () {
                    jQuery.each(jQuery(this).find("a[class=this]"), function () {
                        gsp = jQuery(this).attr("gsp") + "," + gsp;
                    });
                    if (jQuery(this).find("a[class=this]").length == 0) add = false;
                });
            }
            var count = jQuery("#goods_count").val();
            if (count == 0) {
                add = false;
                alert("至少购买一件商品!");
                return;
            }
            if (goods_inventory == 0) {
                add = false;
                alert("商品库存为0,不能购买!");
                return;
            }
            var buy_type = arguments[4];
            console.log("购买类型---"+buy_type);
            if (add) {
                jQuery.post("/add_goods_cart.htm", {
                    "id": id,
                    "count": count,
                    "price": price,
                    "gsp": gsp,
                    "buy_type": buy_type
                }, function (data) {
                    jQuery("#cart_goods_count").html(data.count);
                    jQuery("#cart_goods_totalprice").html(data.total_price);
                    window.location.href = "/goods_cart1.htm";
                }, "json");
            } else {
                jQuery("#goods_spec_info").removeClass().addClass("detailsbottom detailsbottom_hover");
                jQuery("#goods_spec_info_close").show();
                jQuery("#goods_spec_chose").show();
            }
        }
    }

    function ajaxPage(url, currentPage, obj) {
        jQuery.ajax({
            type: 'POST', url: url, data: {"currentPage": currentPage, "goods_id": "${obj.id}", "id": "${store.id}"},
            beforeSend: function () {
            },
            success: function (data) {
                jQuery(".selleddetails").empty();
                jQuery(".selleddetails").append(data);
            }
        })
    }

</script>
</html>
